<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Îî∏Í∏∞Î•º ÌîºÌï¥Îùº!</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      background: pink;
      overflow: hidden;
      font-family: 'Arial', sans-serif;
    }
    #gameCanvas {
      position: absolute;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background-color: #ffe4f2;
    }
    #gameOver {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: white;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.3);
      display: none;
      text-align: center;
    }
    #gameOver button {
      margin-top: 10px;
      padding: 10px 20px;
      background: hotpink;
      border: none;
      color: white;
      font-size: 16px;
      border-radius: 5px;
    }
  </style>
</head>
<body>
  <canvas id="gameCanvas"></canvas>
  <div id="gameOver">
    <h2>üíÄ GAME OVER üíÄ</h2>
    <p id="timeRecord"></p>
    <button onclick="startGame()">Îã§Ïãú ÏãúÏûë</button>
  </div>
  <script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    const player = {
      x: canvas.width / 2,
      y: canvas.height - 60,
      size: 50,
      speed: 12,
      isInvincible: false,
    };

    let fruits = [];
    let gameOver = false;
    let speed = 4;
    let timer = 0;
    let interval;

    const gameOverDiv = document.getElementById("gameOver");
    const timeRecord = document.getElementById("timeRecord");

    function drawPlayer() {
      ctx.font = `${player.size}px Arial`;
      ctx.textAlign = "center";
      ctx.fillText("üë©üèª‚Äçüç≥", player.x, player.y);
    }

    function drawFruits() {
      fruits.forEach((fruit) => {
        ctx.font = "40px Arial";
        ctx.fillText(fruit.type, fruit.x, fruit.y);
      });
    }

    function updateFruits() {
      fruits.forEach((fruit) => (fruit.y += speed));
      fruits = fruits.filter((fruit) => fruit.y < canvas.height + 40);
    }

    function createFruit() {
      const x = Math.random() * (canvas.width - 40) + 20;
      const isWatermelon = Math.random() < Math.random() * 0.35 + 0.15;
      const type = isWatermelon ? "üçâ" : "üçì";
      fruits.push({ x, y: -40, type });
    }

    function detectCollision() {
      fruits.forEach((fruit) => {
        const dist = Math.abs(fruit.x - player.x);
        const yDist = Math.abs(fruit.y - player.y);
        if (dist < 30 && yDist < 30) {
          if (fruit.type === "üçì" && !player.isInvincible) {
            endGame();
          } else if (fruit.type === "üçâ") {
            player.isInvincible = true;
            setTimeout(() => player.isInvincible = false, 5000);
          }
        }
      });
    }

    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      drawPlayer();
      drawFruits();
    }

    function update() {
      if (!gameOver) {
        updateFruits();
        detectCollision();
        draw();
        requestAnimationFrame(update);
      }
    }

    function gameLoop() {
      createFruit();
      timer += 1;
      speed += 0.02;
    }

    function startGame() {
      player.x = canvas.width / 2;
      fruits = [];
      speed = 4;
      timer = 0;
      gameOver = false;
      gameOverDiv.style.display = "none";
      interval = setInterval(gameLoop, 200);
      update();
    }

    function endGame() {
      gameOver = true;
      clearInterval(interval);
      timeRecord.textContent = `ÏÉùÏ°¥ ÏãúÍ∞Ñ: ${(timer / 5).toFixed(1)}Ï¥à`;
      gameOverDiv.style.display = "block";
    }

    function movePlayer(e) {
      const isTouch = e.type.includes("touch");
      const x = isTouch ? e.touches[0].clientX : e.clientX;
      player.x = x;
    }

    window.addEventListener("mousemove", movePlayer);
    window.addEventListener("touchmove", movePlayer);

    startGame();
  </script>
</body>
</html>
